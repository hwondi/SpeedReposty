local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local guiName = "FullBrightGUI"

-- Armazena configurações originais para restaurar
local originalSettings = {
	Brightness = Lighting.Brightness,
	ClockTime = Lighting.ClockTime,
	GlobalShadows = Lighting.GlobalShadows,
	FogEnd = Lighting.FogEnd,
	Ambient = Lighting.Ambient,
	OutdoorAmbient = Lighting.OutdoorAmbient
}

local fullBrightSettings = {
	Brightness = 2,       -- ajuste conforme desejar
	ClockTime = 14,      -- hora do dia clara
	GlobalShadows = false,
	FogEnd = 1e6,
	Ambient = Color3.fromRGB(255,255,255),
	OutdoorAmbient = Color3.fromRGB(255,255,255)
}

local enabled = false

-- Funções de ativar/desativar
local function applyFullBright()
	Lighting.Brightness = fullBrightSettings.Brightness
	Lighting.ClockTime = fullBrightSettings.ClockTime
	Lighting.GlobalShadows = fullBrightSettings.GlobalShadows
	Lighting.FogEnd = fullBrightSettings.FogEnd
	Lighting.Ambient = fullBrightSettings.Ambient
	Lighting.OutdoorAmbient = fullBrightSettings.OutdoorAmbient
end

local function restoreLighting()
	Lighting.Brightness = originalSettings.Brightness
	Lighting.ClockTime = originalSettings.ClockTime
	Lighting.GlobalShadows = originalSettings.GlobalShadows
	Lighting.FogEnd = originalSettings.FogEnd
	Lighting.Ambient = originalSettings.Ambient
	Lighting.OutdoorAmbient = originalSettings.OutdoorAmbient
end

local function toggleFullBright()
	enabled = not enabled
	if enabled then
		applyFullBright()
	else
		restoreLighting()
	end
	return enabled
end

-- Cria GUI programaticamente (não precisa criar no Studio)
local function createGui()
	-- evita duplicatas
	if player:WaitForChild("PlayerGui"):FindFirstChild(guiName) then
		return player.PlayerGui[guiName]
	end

	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = guiName
	screenGui.ResetOnSpawn = false
	screenGui.Parent = player.PlayerGui

	local mainFrame = Instance.new("Frame")
	mainFrame.Name = "Main"
	mainFrame.Size = UDim2.new(0, 320, 0, 80)
	mainFrame.Position = UDim2.new(0.5, -160, 0.1, 0)
	mainFrame.AnchorPoint = Vector2.new(0.5, 0)
	mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	mainFrame.BackgroundTransparency = 0
	mainFrame.BorderSizePixel = 0
	mainFrame.Parent = screenGui
	mainFrame.Active = true -- necessário para arrastar em alguns clientes
	mainFrame.ClipsDescendants = false
	mainFrame.ZIndex = 50
	mainFrame.Name = "FullBrightMain"

	local uiStroke = Instance.new("UICorner")
	uiStroke.CornerRadius = UDim.new(0, 12)
	uiStroke.Parent = mainFrame

	local title = Instance.new("TextLabel")
	title.Name = "Title"
	title.BackgroundTransparency = 1
	title.Size = UDim2.new(0.6, -10, 1, 0)
	title.Position = UDim2.new(0, 12, 0, 0)
	title.Font = Enum.Font.SourceSansSemiBold
	title.TextSize = 24
	title.Text = "FullBright"
	title.TextColor3 = Color3.fromRGB(255,255,255)
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.Parent = mainFrame

	local toggleButton = Instance.new("TextButton")
	toggleButton.Name = "Toggle"
	toggleButton.Size = UDim2.new(0, 88, 0, 40)
	toggleButton.Position = UDim2.new(1, -100, 0.5, -20)
	toggleButton.AnchorPoint = Vector2.new(0, 0.5)
	toggleButton.Font = Enum.Font.SourceSansSemibold
	toggleButton.TextSize = 18
	toggleButton.Text = "Ativar"
	toggleButton.BackgroundColor3 = Color3.fromRGB(60,60,60)
	toggleButton.TextColor3 = Color3.fromRGB(255,255,255)
	toggleButton.BorderSizePixel = 0
	toggleButton.Parent = mainFrame
	local btnCorner = Instance.new("UICorner", toggleButton)
	btnCorner.CornerRadius = UDim.new(0, 8)

	local closeBtn = Instance.new("TextButton")
	closeBtn.Name = "Close"
	closeBtn.Size = UDim2.new(0, 24, 0, 24)
	closeBtn.Position = UDim2.new(1, -28, 0, 8)
	closeBtn.AnchorPoint = Vector2.new(0, 0)
	closeBtn.Font = Enum.Font.SourceSansBold
	closeBtn.TextSize = 18
	closeBtn.Text = "✕"
	closeBtn.BackgroundTransparency = 1
	closeBtn.TextColor3 = Color3.fromRGB(200,200,200)
	closeBtn.Parent = mainFrame

	-- indicador de estado (pequeno círculo)
	local indicator = Instance.new("Frame")
	indicator.Name = "Indicator"
	indicator.AnchorPoint = Vector2.new(0.5, 0.5)
	indicator.Size = UDim2.new(0, 14, 0, 14)
	indicator.Position = UDim2.new(1, -44, 0.5, 0)
	indicator.BackgroundColor3 = Color3.fromRGB(180, 180, 180)
	indicator.BorderSizePixel = 0
	indicator.Parent = mainFrame
	local indCorner = Instance.new("UICorner", indicator)
	indCorner.CornerRadius = UDim.new(1, 0)

	-- Função para atualizar texto e indicador
	local function updateUi()
		if enabled then
			toggleButton.Text = "Desativar"
			indicator.BackgroundColor3 = Color3.fromRGB(102, 255, 102) -- verde
		else
			toggleButton.Text = "Ativar"
			indicator.BackgroundColor3 = Color3.fromRGB(180, 180, 180) -- cinza
		end
	end

	-- Drag (arrastar)
	local dragging, dragInput, dragStart, startPos
	local function update(input)
		local delta = input.Position - dragStart
		mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end

	mainFrame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = mainFrame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	mainFrame.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			update(input)
		end
	end)

	-- Botões
	toggleButton.Activated:Connect(function()
		toggleFullBright()
		updateUi()
	end)

	closeBtn.Activated:Connect(function()
		screenGui.Enabled = not screenGui.Enabled -- fecha/abre
	end)

	-- Tecla rápida 'F'
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if not gameProcessed and input.UserInputType == Enum.UserInputType.Keyboard then
			if input.KeyCode == Enum.KeyCode.F then
				toggleFullBright()
				updateUi()
			end
		end
	end)

	-- inicializa UI
	updateUi()
	return screenGui
end

-- Executa criação da GUI
createGui()

-- Opcional: expõe função global (apenas no cliente) para chamadas externas:
-- Ex.: _G.ToggleFullBright() -> alterna
_G.ToggleFullBright = function()
	local state = toggleFullBright()
	-- atualiza UI se existir
	local g = player.PlayerGui:FindFirstChild(guiName)
	if g and g:FindFirstChild("Main") and g.Main:FindFirstChild("Toggle") then
		local btn = g.Main.Toggle
		local ind = g.Main:FindFirstChild("Indicator")
		if state then
			btn.Text = "Desativar"
			if ind then ind.BackgroundColor3 = Color3.fromRGB(102,255,102) end
		else
			btn.Text = "Ativar"
			if ind then ind.BackgroundColor3 = Color3.fromRGB(180,180,180) end
		end
	end
	return state
end
